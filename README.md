# Fridare

[English](#Features) | [ä¸­æ–‡](#ç‰¹æ€§) | [GUIå›¾å½¢ç•Œé¢](#-guiç‰ˆæœ¬æˆªå›¾)

[![GitHub Streak](https://streak-stats.demolab.com?user=suifei&theme=dark&locale=zh_Hans&date_format=%5BY.%5Dn.j)](https://git.io/streak-stats)
<img src="screenshots/555354813.jpg" width="156" alt="QQç¾¤äºŒç»´ç "> 

![Github stars](https://img.shields.io/github/stars/suifei/fridare?style=social)
![Github forks](https://img.shields.io/github/forks/suifei/fridare?style=social)
![Github watchers](https://img.shields.io/github/watchers/suifei/fridare?style=social)
![Github license](https://img.shields.io/github/license/suifei/fridare)
![Github issues](https://img.shields.io/github/issues/suifei/fridare)
![Github pull requests](https://img.shields.io/github/issues-pr/suifei/fridare)
![Github contributors](https://img.shields.io/github/contributors/suifei/fridare)
![Github last commit](https://img.shields.io/github/last-commit/suifei/fridare)
![Github repo size](https://img.shields.io/github/repo-size/suifei/fridare)
![Github code size](https://img.shields.io/github/languages/code-size/suifei/fridare)
![Github language count](https://img.shields.io/github/languages/count/suifei/fridare)
![Github top language](https://img.shields.io/github/languages/top/suifei/fridare)
![Github tag](https://img.shields.io/github/v/tag/suifei/fridare)
[![GitHub followers](https://img.shields.io/github/followers/suifei.svg?style=social&label=Follow&maxAge=2592000)](https://github.com/suifei?tab=followers)
[![Twitter Follow](https://img.shields.io/twitter/follow/csuifei?style=social)](https://twitter.com/csuifei)

Fridare æ˜¯ä¸€ä¸ªç”¨äº iOS frida æ’ä»¶ã€Android,linux,Windows ç­‰å¹³å° frida-server çš„è‡ªåŠ¨åŒ–é­”æ”¹å·¥å…·ã€‚å®ƒå…è®¸ç”¨æˆ·æ›´æ”¹åç§°å’Œç«¯å£ï¼Œä»¥å¢å¼ºå®‰å…¨æ€§å’Œçµæ´»æ€§ã€‚å…é™¤äº†å¾ˆå¤šè¶Šç‹±æ£€æµ‹fridaçš„æƒ…å†µã€‚

ğŸ‰ **v4.0.0 é‡å¤§æ›´æ–°**ï¼šå…¨æ–°å‘å¸ƒåŸºäº Fyne æ¡†æ¶çš„è·¨å¹³å°GUIç‰ˆæœ¬ï¼Œæä¾›ç°ä»£åŒ–çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œè®© Frida æœåŠ¡å™¨ä¿®æ”¹å˜å¾—æ›´åŠ ç›´è§‚å’Œä¾¿æ·ï¼

âœ¨ **åŒæ¨¡å¼æ”¯æŒ**ï¼šæ—¢ä¿ç•™äº†å¼ºå¤§çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œåˆæ–°å¢äº†ç”¨æˆ·å‹å¥½çš„å›¾å½¢ç•Œé¢ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ã€‚

**[Windows ä¸‹ä½¿ç”¨](win/README.md)|[Android æ–‡æ¡£](docs/android.md)|[iOS æ–‡æ¡£](docs/ios.md)|[frida-tools æ–‡æ¡£](docs/patch-tools.md)|[å®‰è£…æŒ‡åŒ—](docs/install.md)|[CHANGELOG](CHANGELOG)**

æ¬¢è¿å¤§å®¶å…¥QQç¾¤è®¨è®ºï¼š[QQ 555354813](screenshots/555354813.jpg) ï¼Œå¦‚æœ¬é¡¹ç›®å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè®°å¾—ç»™ä½œè€…åŠ æ˜Ÿé¼“åŠ±å“¦ï¼

## ç‰¹æ€§

- **ğŸ‰ å…¨æ–°GUIç‰ˆæœ¬**ï¼šåŸºäº Fyne æ¡†æ¶çš„ç°ä»£åŒ–å›¾å½¢ç”¨æˆ·ç•Œé¢
- **ğŸ–¥ï¸ è·¨å¹³å°æ”¯æŒ**ï¼šWindowsã€macOSã€Linux åŸç”ŸGUIåº”ç”¨
- **ğŸ“± ç›´è§‚æ“ä½œ**ï¼šå¯è§†åŒ–çš„ Frida æœåŠ¡å™¨ä¿®æ”¹å’Œé…ç½®ç®¡ç†
- **ğŸ“Š å®æ—¶åé¦ˆ**ï¼šå›¾å½¢åŒ–æ—¥å¿—æ˜¾ç¤ºå’Œè¿›åº¦æ¡å±•ç¤º
- **ğŸ”§ Windows debåŒ…æ”¯æŒ**ï¼šåœ¨Windowså¹³å°ä¸‹ç›´æ¥ä¿®æ”¹å’Œåˆ›å»ºdebåŒ…ï¼Œæ— éœ€Linuxç¯å¢ƒ
- è‡ªåŠ¨ä¸‹è½½å¹¶ä¿®æ”¹æŒ‡å®šç‰ˆæœ¬çš„ frida-server 
- éšæœºç”Ÿæˆæ–°çš„ frida-server åç§°
- è‡ªå®šä¹‰ frida-server ç«¯å£
- æ”¯æŒ arm å’Œ arm64 æ¶æ„
- äºŒè¿›åˆ¶æ›¿æ¢ä¿®æ”¹
   - frida-server
   - frida-agent.dylib
   - frida-tools
- ç”Ÿæˆå¯ç›´æ¥å®‰è£…çš„ä¿®æ”¹ç‰ˆ .deb åŒ…
- ä¸€ä½“åŒ–å‘½ä»¤è¡Œç•Œé¢ï¼Œæä¾›å¤šç§åŠŸèƒ½
- é…ç½®æ–‡ä»¶æ”¯æŒï¼Œå¯ä¿å­˜ç”¨æˆ·è®¾ç½®
- è‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£…ä¾èµ–
- ä¸‹è½½ç‰¹å®š Frida æ¨¡å—
- åˆ—å‡ºå¯ç”¨ Frida ç‰ˆæœ¬å’Œæ¨¡å—
- æ”¯æŒ Conda ç¯å¢ƒ
- æ”¯æŒ macho, elf, pe æ–‡ä»¶æ ¼å¼
- æ”¯æŒ Windows,Linux,MacOS,Android,IOS çš„patch
- æ”¯æŒè‡ªæ›´æ–°

æ¬¢è¿ä½¿ç”¨æ–°çš„ä¸€é”®å®‰è£…åŠŸèƒ½å¿«é€Ÿå¼€å§‹ä½¿ç”¨ Fridareï¼

```shell
 curl -s https://raw.githubusercontent.com/suifei/fridare/main/fridare.sh | bash -s install
```

## ğŸ‰ å…¨æ–°GUIç‰ˆæœ¬ v4.0.0 - 2025-01-02

### é‡å¤§æ›´æ–°ï¼šå›¾å½¢ç”¨æˆ·ç•Œé¢å‘å¸ƒ

Fridare ç°åœ¨æä¾›äº†åŸºäº Fyne æ¡†æ¶çš„ç°ä»£åŒ–å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œè®© Frida æœåŠ¡å™¨çš„ä¿®æ”¹å˜å¾—æ›´åŠ ç›´è§‚å’Œä¾¿æ·ï¼

#### ğŸš€ GUIç‰ˆæœ¬äº®ç‚¹

- **ğŸ¨ ç°ä»£åŒ–ç•Œé¢**ï¼šé‡‡ç”¨ Fyne æ¡†æ¶æ„å»ºçš„è·¨å¹³å°åŸç”ŸGUIåº”ç”¨
- **ğŸ–±ï¸ æ‹–æ‹½æ“ä½œ**ï¼šæ”¯æŒæ–‡ä»¶æ‹–æ‹½ï¼Œç®€åŒ–æ–‡ä»¶é€‰æ‹©æµç¨‹
- **ğŸ“Š å®æ—¶ç›‘æ§**ï¼šå¯è§†åŒ–è¿›åº¦æ¡å’Œå®æ—¶æ—¥å¿—æ˜¾ç¤º
- **âš™ï¸ å¯è§†åŒ–é…ç½®**ï¼šå›¾å½¢åŒ–çš„é…ç½®ç®¡ç†ç•Œé¢
- **ğŸ”§ å¤šå·¥å…·é›†æˆ**ï¼šåŒ…å«åˆ›å»ºã€ä¿®è¡¥ã€GUIä¸‰ä¸ªç‹¬ç«‹å·¥å…·

#### ğŸ“¦ æ„å»ºGUIç‰ˆæœ¬

```bash
cd ui
./build.sh
```

æ„å»ºå®Œæˆåå°†ç”Ÿæˆä¸‰ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼š
- `fridare-gui.exe` - ä¸»GUIåº”ç”¨ç¨‹åº
- `fridare-create.exe` - åˆ›å»ºå·¥å…· 
- `fridare-patch.exe` - è¡¥ä¸å·¥å…·

#### ğŸ–¥ï¸ è¿è¡ŒGUIåº”ç”¨

```bash
./build/fridare-gui.exe
```

GUIç‰ˆæœ¬ä¿æŒäº†ä¸å‘½ä»¤è¡Œç‰ˆæœ¬å®Œå…¨ç›¸åŒçš„åŠŸèƒ½ï¼ŒåŒæ—¶æä¾›äº†æ›´åŠ å‹å¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ— è®ºæ‚¨æ˜¯æ–°æ‰‹è¿˜æ˜¯ä¸“å®¶ï¼Œéƒ½å¯ä»¥è½»æ¾ä½¿ç”¨å›¾å½¢ç•Œé¢æ¥ä¿®æ”¹å’Œé…ç½® Frida æœåŠ¡å™¨ã€‚

### ğŸ“¸ GUIç‰ˆæœ¬æˆªå›¾

![](screenshots/UI-01.png)
![](screenshots/UI-02.png)
![](screenshots/UI-03.png)
![](screenshots/UI-04.png)
![](screenshots/UI-05.png)
![](screenshots/UI-06.png)
![](screenshots/UI-07.png)
![](screenshots/UI-08.png)

### ğŸ”§ Windowså¹³å°debåŒ…å®Œå…¨æ”¯æŒ

v4.0.0ç‰ˆæœ¬çš„é‡å¤§çªç ´ä¹‹ä¸€æ˜¯åœ¨Windowså¹³å°ä¸‹å®ç°äº†å¯¹debåŒ…çš„å®Œå…¨æ”¯æŒï¼š

#### æ ¸å¿ƒä¼˜åŠ¿
- **æ— éœ€Linuxç¯å¢ƒ**ï¼šç›´æ¥åœ¨Windowsä¸‹å¤„ç†debåŒ…ï¼Œå‘Šåˆ«WSLå’Œè™šæ‹Ÿæœº
- **åŸç”Ÿdebå¤„ç†**ï¼šå®Œæ•´çš„è§£å‹ã€ä¿®æ”¹ã€é‡æ–°æ‰“åŒ…å·¥å…·é“¾
- **GUIå¯è§†åŒ–æ“ä½œ**ï¼šå›¾å½¢ç•Œé¢ä¸‹çš„æ‹–æ‹½å¼debåŒ…å¤„ç†
- **ä¸€é”®å¼å·¥ä½œæµ**ï¼šä»ä¸‹è½½åˆ°ä¿®æ”¹åˆ°æ‰“åŒ…çš„å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹

#### æŠ€æœ¯å®ç°
- å®ç°äº†Windowså¹³å°ä¸‹çš„åŸç”ŸdebåŒ…è§£æç®—æ³•
- é›†æˆäº†è·¨å¹³å°çš„tar.gzå’Œarå½’æ¡£å¤„ç†èƒ½åŠ›
- æ”¯æŒDebianæ§åˆ¶æ–‡ä»¶çš„è¯»å–å’Œä¿®æ”¹
- ä¿æŒLinuxå…¼å®¹çš„æ–‡ä»¶æƒé™å’Œç»“æ„

#### ä½¿ç”¨åœºæ™¯
```bash
# ç›´æ¥åœ¨Windowsä¸‹ä¿®æ”¹iOS debåŒ…
./fridare-gui.exe  # æ‹–æ‹½debæ–‡ä»¶è¿›è¡Œå¯è§†åŒ–ä¿®æ”¹

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
./fridare-patch.exe -i frida-server.deb -o modified.deb
```

è¿™é¡¹åŠŸèƒ½è®©Windowsç”¨æˆ·æ— éœ€é¢å¤–ç¯å¢ƒå³å¯å®Œæˆå®Œæ•´çš„FridaæœåŠ¡å™¨å®šåˆ¶å·¥ä½œæµç¨‹ï¼

## [v3.1.5] - 2024-07-29 Windows æ”¯æŒ

### Added
- æ–°å¢ `patch-frida.cmd` è„šæœ¬,ç”¨äºåœ¨ Windows ç¯å¢ƒä¸‹ä¿®æ”¹ frida-server
- æ–°å¢ `patch-frida-tools.cmd` è„šæœ¬,ç”¨äºåœ¨ Windows ç¯å¢ƒä¸‹ä¿®æ”¹ frida-tools
- å¢åŠ å¯¹ Windows å¹³å°çš„å…¨é¢æ”¯æŒ
- æ›´æ–°äº†ä½¿ç”¨è¯´æ˜,å¢åŠ äº† Windows å¹³å°çš„è¯¦ç»†æ•™ç¨‹

## [v3.1.4] - 2024-07-18

### Added
- å¢åŠ  `patch-tools` å‘½ä»¤ï¼Œç”¨äºä¿®è¡¥ frida-tools æ¨¡å—
- æ–°å¢ `render_markdown` å‡½æ•°ï¼Œç”¨äºåœ¨ç»ˆç«¯ä¸­æ¸²æŸ“ç®€å•çš„ Markdown æ ¼å¼
- æ·»åŠ  `generate_random_name` å‡½æ•°ï¼Œç”¨äºç”Ÿæˆéšæœºçš„ Frida é­”æ”¹å
- å®ç° `move_file` å‡½æ•°ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ç§»åŠ¨æ—¶çš„ "are identical" é”™è¯¯

### Improved 
- ä¼˜åŒ– `list_frida_versions` å‡½æ•°ï¼Œç°åœ¨èƒ½å¤Ÿæ¸²æŸ“ Markdown æ ¼å¼çš„ç‰ˆæœ¬è¯´æ˜
- æ”¹è¿› `build_frida` å‡½æ•°ï¼Œæ”¯æŒä½¿ç”¨æœ¬åœ° deb æ–‡ä»¶è¿›è¡Œæ„å»º
- å¢å¼º `patch_frida_tools` å’Œ `restore_frida_tools` å‡½æ•°çš„åŠŸèƒ½å’Œé”™è¯¯å¤„ç†
- ä¼˜åŒ– `modify_frida_tools` å‡½æ•°ï¼Œæé«˜ä¿®æ”¹ frida-tools çš„å¯é æ€§
- æ”¹è¿› `download_frida_module` å‡½æ•°ï¼Œå¢åŠ å¯¹ç‰¹å®šæ“ä½œç³»ç»Ÿå’Œæ¶æ„çš„æ”¯æŒ

### Fixed
- ä¿®å¤äº†åœ¨æŸäº›æƒ…å†µä¸‹æ— æ³•æ­£ç¡®è·å– Frida è·¯å¾„çš„é—®é¢˜
- è§£å†³äº†ç§»åŠ¨æ–‡ä»¶æ—¶å¯èƒ½é‡åˆ°çš„ "are identical" é”™è¯¯

### Changed
- æ›´æ–° `show_main_usage` å’Œå…¶ä»–ä½¿ç”¨è¯´æ˜å‡½æ•°ï¼Œä»¥åæ˜ æ–°å¢çš„åŠŸèƒ½
- è°ƒæ•´ `parse_arguments` å‡½æ•°ï¼Œæ”¯æŒæ–°å¢çš„ `patch-tools` å‘½ä»¤
- ä¿®æ”¹é…ç½®æ–‡ä»¶çš„å¤„ç†æ–¹å¼ï¼Œå¢åŠ äº†å¯¹ `FRIDA_NAME` çš„æ”¯æŒ

### Other Changes
- ä»£ç ç»“æ„ä¼˜åŒ–ï¼Œæé«˜äº†æ•´ä½“å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
- å¢åŠ äº†æ›´å¤šçš„æ—¥å¿—è¾“å‡ºï¼Œæä¾›æ›´è¯¦ç»†çš„æ‰§è¡Œä¿¡æ¯
- æ›´æ–°äº†ç‰ˆæœ¬å·è‡³ 3.1.4

## v3.1.2 - 2024-07-17

### Added
- å¢åŠ å¯¹å¤šå¹³å°çš„æ”¯æŒï¼šç°åœ¨æ”¯æŒ `macOS`ã€`iOS`ã€`Android`ã€`Linux` å’Œ `Windows`
- æ–°å¢ `upgrade` å‘½ä»¤ï¼šç”¨äºè‡ªåŠ¨æ›´æ–° Fridare è„šæœ¬
- æ–°å¢ä¸€é”®å®‰è£…åŠŸèƒ½

### Changed
- ä¼˜åŒ–ç‰ˆæœ¬æ£€æŸ¥å’Œæ›´æ–°æµç¨‹

### Fixed
- ä¿®å¤äº†åœ¨ Windows ç³»ç»Ÿä¸Šæ— æ³•æ­£ç¡®è¯†åˆ«å’Œå®‰è£… Frida å·¥å…·çš„é—®é¢˜
- ä¿®å¤äº†åœ¨ macOS ç³»ç»Ÿä¸Šæ— æ³•æ­£ç¡®ä¸‹è½½ Frida å·¥å…·çš„é—®é¢˜

### Other Changes
- æ›´æ–°ç‰ˆæœ¬å·è‡³ 3.1.2
- ä»£ç é‡æ„å’Œä¼˜åŒ–ï¼Œæé«˜æ•´ä½“æ€§èƒ½å’Œç¨³å®šæ€§

### v3.1.1
- å¢åŠ äº† `upgrade` å‘½ä»¤ï¼Œç”¨äºè‡ªåŠ¨æ›´æ–° Fridare è„šæœ¬

### v3.1.0
- å¢åŠ äº† `patch` å‘½ä»¤ï¼Œç”¨äºä¿®è¡¥æŒ‡å®šçš„ Frida æ¨¡å—
   - ä¾‹å¦‚ï¼š`å®‰å“ frida-server` `./fridare.sh p -m frida-server -latest -os android -arch arm64 -o ./patched`
- å¢åŠ äº†å¯¹ `patch` å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯
- å¢åŠ å¯¹ ELF å’Œ PE æ–‡ä»¶æ ¼å¼çš„æ”¯æŒ(æ”¯æŒ Windows,Linux,MacOS,Android,IOS)
- æ›´æ–°äº† `build`ã€`download` ç­‰å‘½ä»¤çš„ç”¨æ³•è¯´æ˜
- ä¿®å¤äº†ä¸€äº›å°çš„ Bug å¹¶æ”¹è¿›äº†è„šæœ¬çš„ç¨³å®šæ€§

![v3.1.0](screenshots/3.png)

### v3.0.1 Fixed
- ä¿®å¤åœ¨ Conda ç¯å¢ƒä¸­æ— æ³•æ­£ç¡®è¯†åˆ«å’Œä¿®æ”¹ Frida å·¥å…·çš„é—®é¢˜
- è§£å†³å¤šä¸ª Python ç¯å¢ƒå…±å­˜æ—¶çš„å…¼å®¹æ€§é—®é¢˜

### æ–°å¢ç‰¹æ€§ v3.0.0
- æ–°å¢ `fridare.sh` è„šæœ¬ï¼Œæ•´åˆæ‰€æœ‰åŠŸèƒ½ï¼Œæä¾›æ›´å®Œæ•´çš„å‘½ä»¤è¡Œç•Œé¢
- æ–°å¢ `build`, `ls`, `download`, `lm`, `setup`, `config`, å’Œ `help` å‘½ä»¤
- æ–°å¢é…ç½®æ–‡ä»¶æ”¯æŒï¼Œå¯ä»¥ä¿å­˜å’ŒåŠ è½½ç”¨æˆ·è®¾ç½®
- æ–°å¢é¢œè‰²è¾“å‡ºï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- æ–°å¢è‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£…ä¾èµ–åŠŸèƒ½
- æ–°å¢ä¸‹è½½ç‰¹å®š Frida æ¨¡å—çš„åŠŸèƒ½
- æ–°å¢åˆ—å‡ºå¯ç”¨ Frida ç‰ˆæœ¬å’Œæ¨¡å—çš„åŠŸèƒ½

### v2.2.0 (ä»…æµ‹è¯• macOS arm æ¶æ„ï¼Œå…¶å®ƒæ¶æ„æœªæµ‹è¯•)
- æ–°å¢åŠ  frida-tools è¡¥ä¸ï¼Œé€‚é… `frida:rpc` ç‰¹å¾é­”æ”¹
   - è§£å†³ Android å†…å­˜æ‰«æè¯¥å­—ç¬¦ä¸²é—®é¢˜
   - è‡ªåŠ¨æ‰«ææœ¬åœ° pip å®‰è£… frida-tools çš„ä½ç½®ï¼Œå¯¹ `core.py` æ–‡ä»¶è¿›è¡Œé­”æ”¹ï¼Œå¯¹ `_frida.abi3.so` æ–‡ä»¶è¿›è¡Œé­”æ”¹
- æ–°å¢åŠ  frida-agent.dylib é­”æ”¹ï¼Œä»æ–‡ä»¶åç§°ï¼ŒåŠ è½½ä½ç½®è¿›è¡Œéšè—
   - è§£å†³ agent åŠ è½½æœªéšè—é—®é¢˜

### v2.1.1

- å¼•å…¥ `autoinstall.sh` è„šæœ¬ï¼Œå®ç° Frida æ’ä»¶çš„è‡ªåŠ¨éƒ¨ç½²ã€‚
- å¼•å…¥ `Makefile`ï¼Œç®€åŒ–é¡¹ç›®çš„æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚
- è¿è¡Œä¹‹å‰è¯·ç¡®ä¿æœ¬æœºå·²ç»å®‰è£…äº† [issh](https://github.com/4ch12dy/issh) å‘½ä»¤ã€‚å¹¶é…ç½®å¥½äº† ssh çš„å…å¯†ç™»å½•ã€‚
   > é…ç½® issh çš„ ssh å…å¯†ç™»é™†
   ```shell
   # ç”Ÿæˆ keygen å¯†é’¥ï¼Œå¦‚æœå·²ç”Ÿæˆå¯ä»¥è·³è¿‡
   ssh-keygen -t rsa -b 4096 -C "<EMAIL>"
   # é…ç½®æ‰‹æœºIPï¼Œå¦‚æœUSBè¿æ¥å¯ä»¥ä¸é…ç½®
   issh ip set <iPhone-IP>     
   # æ‹·è´å…¬é’¥åˆ°æ‰‹æœº /var/root ï¼Œéœ€è¦ root å¯†ç  alpine
   issh scp ~/.ssh/id_rsa.pub  
   # è¿œç¨‹æœåŠ¡å™¨æ·»åŠ å…¬é’¥åˆ° authorized_keys æ–‡ä»¶
   issh run "mkdir -p ~/.ssh && cat /var/root/id_rsa.pub >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys && chmod 700 ~/.ssh"
   ```

## Frida é­”æ”¹è„šæœ¬çš„ç»“æ„å’ŒåŠŸèƒ½
```shell
fridare.sh - Frida é­”æ”¹è„šæœ¬
â”‚
â”œâ”€â”€ ä¸»è¦åŠŸèƒ½
â”‚   â”œâ”€â”€ æ„å»ºé­”æ”¹ç‰ˆ Frida (build)
â”‚   â”‚   â”œâ”€â”€ æ”¯æŒæŒ‡å®šç‰ˆæœ¬æˆ–æœ€æ–°ç‰ˆæœ¬
â”‚   â”‚   â”œâ”€â”€ è‡ªåŠ¨ç”Ÿæˆéšæœº5å­—ç¬¦åç§°
â”‚   â”‚   â”œâ”€â”€ è‡ªå®šä¹‰ç«¯å£è®¾ç½®
â”‚   â”‚   â””â”€â”€ æ”¯æŒ arm å’Œ arm64 æ¶æ„
â”‚   â”œâ”€â”€ åˆ—å‡ºå¯ç”¨ Frida ç‰ˆæœ¬ (ls, list)
â”‚   â”‚   â””â”€â”€ ä» GitHub API è·å–ç‰ˆæœ¬ä¿¡æ¯
â”‚   â”œâ”€â”€ ä¸‹è½½ç‰¹å®šç‰ˆæœ¬ Frida (download)
â”‚   â”‚   â”œâ”€â”€ æ”¯æŒä¸‹è½½å•ä¸ªæˆ–æ‰€æœ‰æ¨¡å—
â”‚   â”‚   â””â”€â”€ å¯é€‰çš„è‡ªåŠ¨è§£å‹åŠŸèƒ½
â”‚   â”œâ”€â”€ åˆ—å‡ºå¯ç”¨ Frida æ¨¡å— (lm, list-modules)
â”‚   â”œâ”€â”€ æ£€æŸ¥å¹¶å®‰è£…ç³»ç»Ÿä¾èµ– (setup)
â”‚   â”‚   â”œâ”€â”€ è‡ªåŠ¨æ£€æµ‹ç¼ºå¤±ä¾èµ–
â”‚   â”‚   â””â”€â”€ ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ä¾èµ–
â”‚   â””â”€â”€ é…ç½®é€‰é¡¹è®¾ç½® (config)
â”‚       â”œâ”€â”€ è®¾ç½® HTTP ä»£ç†
â”‚       â”œâ”€â”€ è®¾ç½® Frida æœåŠ¡å™¨ç«¯å£
â”‚       â””â”€â”€ è®¾ç½® Frida é­”æ”¹åç§°
â”‚
â”œâ”€â”€ è„šæœ¬ç»“æ„
â”‚   â”œâ”€â”€ åˆå§‹åŒ–é…ç½® (initialize_config)
â”‚   â”‚   â””â”€â”€ è¯»å–å’Œåˆ›å»ºé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ å‚æ•°è§£æ (parse_arguments)
â”‚   â”‚   â””â”€â”€ æ”¯æŒå¤šç§å‘½ä»¤è¡Œé€‰é¡¹
â”‚   â”œâ”€â”€ å‘½ä»¤å¤„ç†
â”‚   â”‚   â”œâ”€â”€ build: æ„å»ºé­”æ”¹ç‰ˆ Frida
â”‚   â”‚   â”œâ”€â”€ patch: ä¿®è¡¥æŒ‡å®šçš„ Frida æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ setup: è®¾ç½®ç¯å¢ƒ
â”‚   â”‚   â”œâ”€â”€ config: ç®¡ç†é…ç½®
â”‚   â”‚   â”œâ”€â”€ list: åˆ—å‡ºç‰ˆæœ¬
â”‚   â”‚   â”œâ”€â”€ download: ä¸‹è½½æ¨¡å—
â”‚   â”‚   â””â”€â”€ list-modules: åˆ—å‡ºæ¨¡å—
â”‚   â””â”€â”€ ä¸»å‡½æ•° (main)
â”‚       â””â”€â”€ æ•´åˆæ‰€æœ‰åŠŸèƒ½çš„å…¥å£ç‚¹
â”‚
â”œâ”€â”€ æ„å»ºè¿‡ç¨‹ (build_frida)
â”‚   â”œâ”€â”€ ç‰ˆæœ¬æ£€æŸ¥
â”‚   â”‚   â””â”€â”€ æ”¯æŒæœ€æ–°ç‰ˆæœ¬è‡ªåŠ¨æ£€æµ‹
â”‚   â”œâ”€â”€ ç¯å¢ƒå‡†å¤‡
â”‚   â”‚   â”œâ”€â”€ æ£€æŸ¥ Python ç¯å¢ƒ (åŒ…æ‹¬ Conda)
â”‚   â”‚   â””â”€â”€ æ£€æŸ¥ Golang ç¯å¢ƒ
â”‚   â”œâ”€â”€ ä¸‹è½½ Frida (download_frida)
â”‚   â”œâ”€â”€ è§£åŒ… deb æ–‡ä»¶
â”‚   â”œâ”€â”€ ä¿®æ”¹æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ä¿®æ”¹å¯åŠ¨å®ˆæŠ¤ç¨‹åº (modify_launch_daemon)
â”‚   â”‚   â”‚   â””â”€â”€ æ›´æ–° plist æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ä¿®æ”¹ Debian æ–‡ä»¶ (modify_debian_files)
â”‚   â”‚   â”‚   â”œâ”€â”€ æ›´æ–° control æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ æ›´æ–° extrainst_ æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ æ›´æ–° prerm æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ ä¿®æ”¹äºŒè¿›åˆ¶æ–‡ä»¶ (modify_binary)
â”‚   â”‚       â”œâ”€â”€ ä¿®æ”¹ frida-server
â”‚   â”‚       â”œâ”€â”€ ä¿®æ”¹ frida-agent.dylib
â”‚   â”‚       â””â”€â”€ ä½¿ç”¨ hexreplace å·¥å…·
â”‚   â”œâ”€â”€ é‡æ–°æ‰“åŒ… deb æ–‡ä»¶ (repackage_deb)
â”‚   â””â”€â”€ ä¿®æ”¹ frida-tools (modify_frida_tools)
â”‚       â”œâ”€â”€ ä¿®æ”¹ Python åº“æ–‡ä»¶
â”‚       â””â”€â”€ æ›´æ–° core.py ä¸­çš„å­—ç¬¦ä¸²
â”‚
â”œâ”€â”€ è¾…åŠ©åŠŸèƒ½
â”‚   â”œâ”€â”€ æ—¥å¿—è¾“å‡º (log_info, log_success, log_warning, log_error)
â”‚   â”‚   â””â”€â”€ æ”¯æŒå½©è‰²è¾“å‡º
â”‚   â”œâ”€â”€ ç”¨æˆ·ç¡®è®¤ (confirm_execution)
â”‚   â”‚   â””â”€â”€ å¯é€‰çš„è‡ªåŠ¨ç¡®è®¤æ¨¡å¼
â”‚   â”œâ”€â”€ ä¾èµ–æ£€æŸ¥ (check_dependencies)
â”‚   â”œâ”€â”€ ä¾èµ–å®‰è£… (install_dependencies)
â”‚   â”œâ”€â”€ é…ç½®ç®¡ç† (set_config, unset_config, list_config)
â”‚   â””â”€â”€ Frida ç‰ˆæœ¬å’Œæ¨¡å—åˆ—è¡¨ (list_frida_versions, list_frida_modules)
â”‚
â”œâ”€â”€ ä¸‹è½½åŠŸèƒ½ (download_frida_module)
â”‚   â”œâ”€â”€ ç‰ˆæœ¬é€‰æ‹© (æœ€æ–°ç‰ˆæˆ–æŒ‡å®šç‰ˆæœ¬)
â”‚   â”œâ”€â”€ æ¨¡å—é€‰æ‹© (å•ä¸ªæ¨¡å—æˆ–å…¨éƒ¨æ¨¡å—)
â”‚   â”œâ”€â”€ ä¸‹è½½è¿‡ç¨‹
â”‚   â”‚   â””â”€â”€ æ”¯æŒ HTTP ä»£ç†
â”‚   â””â”€â”€ è§£å‹å¤„ç†
â”‚       â””â”€â”€ å¯é€‰çš„è‡ªåŠ¨è§£å‹åŠŸèƒ½
â”‚
â””â”€â”€ å®‰å…¨å’Œæƒé™
    â”œâ”€â”€ sudo æƒé™ä¿æŒ (sudo_keep_alive)
    â””â”€â”€ æ¸…ç†è¿‡ç¨‹ (cleanup)
```

## å‰ææ¡ä»¶

- macOS æ“ä½œç³»ç»Ÿï¼ˆç”¨äºè¿è¡Œæ„å»ºè„šæœ¬ï¼‰
- Homebrew
- Python 3
- Go (ç”¨äºç¼–è¯‘ hexreplace å·¥å…·)
- è¶Šç‹±çš„ iOS è®¾å¤‡
- åœ¨ iOS è®¾å¤‡ä¸Šå®‰è£… OpenSSH

## å®‰è£…

### æ–¹å¼ä¸€ï¼šå‘½ä»¤è¡Œç‰ˆæœ¬

1. å…‹éš†æ­¤ä»“åº“ï¼š
```shell
git clone https://github.com/suifei/fridare.git
cd fridare
```

2. è¿è¡Œè®¾ç½®å‘½ä»¤
```shell
./fridare.sh setup
```
æ­¤å‘½ä»¤å°†æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚

3. æŸ¥çœ‹å¸®åŠ©
```shell
./fridare.sh help
```

### æ–¹å¼äºŒï¼šGUIç‰ˆæœ¬ï¼ˆæ¨èï¼‰

#### æ„å»ºGUIåº”ç”¨

1. ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼š
```shell
# å®‰è£… Go (å¦‚æœå°šæœªå®‰è£…)
# å®‰è£… Fyne ä¾èµ–
go install fyne.io/fyne/v2/cmd/fyne@latest
```

2. æ„å»ºGUIåº”ç”¨ï¼š
```shell
cd ui
./build.sh
```

3. è¿è¡ŒGUIåº”ç”¨ï¼š
```shell
./build/fridare-gui.exe
```

#### GUIç‰ˆæœ¬ç‰¹è‰²

- ğŸ¨ **ç›´è§‚ç•Œé¢**ï¼šç°ä»£åŒ–çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œæ“ä½œç®€å•ç›´è§‚
- ğŸ“ **æ–‡ä»¶æ‹–æ‹½**ï¼šæ”¯æŒæ‹–æ‹½æ–‡ä»¶åˆ°åº”ç”¨ä¸­è¿›è¡Œå¤„ç†
- ğŸ“Š **å®æ—¶åé¦ˆ**ï¼šå¯è§†åŒ–è¿›åº¦æ¡å’Œå½©è‰²æ—¥å¿—è¾“å‡º
- âš™ï¸ **é…ç½®ç®¡ç†**ï¼šå›¾å½¢åŒ–é…ç½®ç•Œé¢ï¼Œè®¾ç½®ä¸€ç›®äº†ç„¶
- ğŸ”§ **å·¥å…·é›†æˆ**ï¼šé›†æˆåˆ›å»ºã€ä¿®è¡¥ã€GUIå¤šä¸ªå·¥å…·äºä¸€ä½“
- ğŸ—‚ï¸ **Windows debåŒ…æ”¯æŒ**ï¼šåœ¨Windowsä¸‹åŸç”Ÿå¤„ç†debåŒ…ï¼Œæ— éœ€Linuxç¯å¢ƒ

## ä½¿ç”¨æ–¹æ³•
Fridare æä¾›äº†å¤šä¸ªå‘½ä»¤æ¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ï¼š

### å‘½ä»¤æ¸…å•

1. `build`: é‡æ–°æ‰“åŒ… Frida
2. `ls` æˆ– `list`: åˆ—å‡ºå¯ç”¨çš„ Frida ç‰ˆæœ¬
3. `download`: ä¸‹è½½ç‰¹å®šç‰ˆæœ¬çš„ Frida
4. `lm` æˆ– `list-modules`: åˆ—å‡ºå¯ç”¨çš„ Frida æ¨¡å—
5. `setup`: æ£€æŸ¥å¹¶å®‰è£…ç³»ç»Ÿä¾èµ–
6. `config`: è®¾ç½®é…ç½®é€‰é¡¹
7. `help`: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

### ä½¿ç”¨èŒƒä¾‹

1. æ„å»ºé­”æ”¹ç‰ˆ Frida
```shell
./fridare.sh build -v 16.0.19 -p 8899 -y
```
è¿™ä¸ªå‘½ä»¤ä¼šæ„å»ºç‰ˆæœ¬ 16.0.19 çš„ Fridaï¼Œè®¾ç½®ç«¯å£ä¸º 8899ï¼Œå¹¶è‡ªåŠ¨ç¡®è®¤æ‰€æœ‰æç¤ºã€‚

2. åˆ—å‡ºå¯ç”¨çš„ Frida ç‰ˆæœ¬
```shell
./fridare.sh ls
```

3. ä¸‹è½½ç‰¹å®šç‰ˆæœ¬çš„ Frida
```shell
./fridare.sh download -v 16.0.19 -m frida-server ./output
```
è¿™ä¸ªå‘½ä»¤ä¼šä¸‹è½½ç‰ˆæœ¬ 16.0.19 çš„ frida-server æ¨¡å—åˆ° ./output ç›®å½•ã€‚

4. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æ‰€æœ‰ Frida æ¨¡å—
```shell
./fridare.sh download -latest -all ./output
```

5. åˆ—å‡ºå¯ç”¨çš„ Frida æ¨¡å—
```shell
./fridare.sh lm
```

6. è®¾ç½®ç¯å¢ƒ
```shell
./fridare.sh setup
```
è¿™ä¸ªå‘½ä»¤ä¼šæ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ç³»ç»Ÿä¾èµ–ã€‚

7. é…ç½®è®¾ç½®
```shell
./fridare.sh config set proxy http://127.0.0.1:7890
./fridare.sh config set port 9999
./fridare.sh config set frida-name abcde
```
è¿™äº›å‘½ä»¤åˆ†åˆ«è®¾ç½®ä»£ç†ã€ç«¯å£å’Œ Frida é­”æ”¹åã€‚

8. åˆ—å‡ºå½“å‰é…ç½®
```shell
./fridare.sh config ls
```

9. è·å–ç‰¹å®šå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯
```shell
./fridare.sh help build
```
è¿™ä¸ªå‘½ä»¤ä¼šæ˜¾ç¤º build å‘½ä»¤çš„è¯¦ç»†ç”¨æ³•ã€‚

10. ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬æ„å»º Frida
```shell
./fridare.sh build -latest -p 9999 -y
```
è¿™ä¸ªå‘½ä»¤ä¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Frida è¿›è¡Œæ„å»ºï¼Œè®¾ç½®ç«¯å£ä¸º 9999ï¼Œå¹¶è‡ªåŠ¨ç¡®è®¤æ‰€æœ‰æç¤ºã€‚

11. ä¸‹è½½ä½†ä¸è§£å‹ Frida æ¨¡å—
```shell
./fridare.sh download -latest -m frida-gadget --no-extract ./output
```
è¿™ä¸ªå‘½ä»¤ä¼šä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ frida-gadget æ¨¡å—åˆ° ./output ç›®å½•ï¼Œä½†ä¸ä¼šè‡ªåŠ¨è§£å‹ã€‚

12. å®‰è£… frida-tools
```shell
./fridare.sh config frida-tools
```
è¿™ä¸ªå‘½ä»¤ä¼šå®‰è£…æˆ–æ›´æ–° frida-toolsã€‚

13. å°†ç”Ÿæˆçš„ .deb åŒ…ä¼ è¾“åˆ°æ‚¨çš„ iOS è®¾å¤‡ï¼š
```shell
scp ./dist/frida_16.3.3_iphoneos-arm_tcp.deb root@<iPhone-IP>:/var/root/
```

14. SSH è¿›å…¥æ‚¨çš„ iOS è®¾å¤‡å¹¶å®‰è£…ä¿®æ”¹åçš„åŒ…ï¼š
```shell
ssh root@<iPhone-IP>
dpkg -i /var/root/frida_16.3.3_iphoneos-arm_tcp.deb
```

è¿™äº›ç¤ºä¾‹æ¶µç›–äº†è„šæœ¬çš„ä¸»è¦åŠŸèƒ½å’Œå¸¸è§ä½¿ç”¨åœºæ™¯ã€‚å¯å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ã€‚

## å®‰è£…å…¼å®¹ç‰ˆæœ¬çš„ Frida å·¥å…·

ä¸ºç¡®ä¿å…¼å®¹æ€§ï¼Œè¯·å®‰è£…ä¸ä¿®æ”¹åçš„æœåŠ¡å™¨ç‰ˆæœ¬ç›¸åŒ¹é…çš„ Frida å·¥å…·ï¼š
```shell
pip install frida-tools==12.4.3
```
å¯¹äº Node.js ç”¨æˆ·ï¼š
```shell
npm install frida@16.3.3
```

## è®¿é—® frida-server
å¦‚æœæ‚¨çš„è®¾å¤‡é€šè¿‡ USB è®¿é—®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿æ¥åˆ°æœ¬åœ° frida-serverï¼š
```shell
frida -U -f <target-process>
```
## ä½¿ç”¨è¿œç¨‹ frida-server
å¦‚æœä¸ä½¿ç”¨usbæ•°æ®çº¿æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿æ¥åˆ°è¿œç¨‹ frida-server ï¼š
```shell
frida -H <iPhone-IP>:8899 -U
frida-trace -H <iPhone-IP>:8899 ...
frida-ps -H <iPhone-IP>:8899
frida-inject -H <iPhone-IP>:8899 ...
```

## åŸç†
Fridare é¡¹ç›®çš„æ ¸å¿ƒåŸç†ï¼š

### 1. frida-server ä¿®æ”¹åŸç†

Fridare çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä¿®æ”¹ frida-server ï¼Œä½¿å…¶æ›´éš¾è¢«æ£€æµ‹ã€‚è¿™ä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å®ç°ï¼š

- é‡å‘½åæœåŠ¡å™¨æ–‡ä»¶ï¼š
   å°† `frida-server` é‡å‘½åä¸ºéšæœºç”Ÿæˆçš„åç§°ï¼ˆå¦‚ `abcde`ï¼‰ï¼Œè¿™æ ·å¯ä»¥é¿å…ç®€å•çš„åç§°æ£€æµ‹ã€‚

- ä¿®æ”¹å¯åŠ¨é…ç½®ï¼š
   æ›´æ–° LaunchDaemons plist æ–‡ä»¶ï¼Œä½¿å…¶ä½¿ç”¨æ–°çš„æœåŠ¡å™¨åç§°å’Œè‡ªå®šä¹‰ç«¯å£ã€‚è¿™æ ·å¯ä»¥æ”¹å˜æœåŠ¡å™¨çš„å¯åŠ¨æ–¹å¼å’Œç›‘å¬ç«¯å£ã€‚

- äºŒè¿›åˆ¶æ–‡ä»¶ä¿®æ”¹ï¼š
   ä½¿ç”¨äºŒè¿›åˆ¶æ›¿æ¢æŠ€æœ¯ï¼Œå°†æœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„ "frida" ç›¸å…³å­—ç¬¦ä¸²æ›¿æ¢ä¸ºè‡ªå®šä¹‰å­—ç¬¦ä¸²ã€‚è¿™å¯ä»¥é¿å…é€šè¿‡æ‰«æäºŒè¿›åˆ¶æ–‡ä»¶æ¥æ£€æµ‹ Fridaã€‚

### 2. deb åŒ…ä¿®æ”¹å’Œé‡æ‰“åŒ…

é¡¹ç›®ä½¿ç”¨ dpkg-deb å·¥å…·è§£åŒ…å’Œé‡æ–°æ‰“åŒ… deb æ–‡ä»¶ã€‚è¿™å…è®¸æˆ‘ä»¬ä¿®æ”¹åŒ…çš„å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š

- æ›´æ–° DEBIAN/control æ–‡ä»¶ä¸­çš„åŒ…å
- ä¿®æ”¹ DEBIAN/extrainst_ å’Œ DEBIAN/prerm è„šæœ¬ä»¥ä½¿ç”¨æ–°çš„æœåŠ¡å™¨åç§°
- æ›¿æ¢å’Œé‡å‘½åå®é™…çš„æœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶

### 3. è‡ªåŠ¨åŒ–æµç¨‹

fridare.sh è„šæœ¬è‡ªåŠ¨åŒ–äº†æ•´ä¸ªè¿‡ç¨‹ï¼š

- ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„ frida-server 
- ç”Ÿæˆéšæœºåç§°
- ä¿®æ”¹æ‰€æœ‰å¿…è¦çš„æ–‡ä»¶
- é‡æ–°æ‰“åŒ… deb æ–‡ä»¶

### 4. å…¼å®¹æ€§è€ƒè™‘

è„šæœ¬åŒæ—¶å¤„ç† arm å’Œ arm64 æ¶æ„çš„åŒ…ï¼Œç¡®ä¿åœ¨ä¸åŒçš„ iOS è®¾å¤‡ä¸Šçš„å…¼å®¹æ€§ã€‚

### 5. å®‰å…¨æ€§å¢å¼º

é€šè¿‡æ›´æ”¹æœåŠ¡å™¨åç§°ã€ç«¯å£å’Œå†…éƒ¨å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªé¡¹ç›®ä½¿å¾—é€šè¿‡å¸¸è§„æ–¹æ³•æ£€æµ‹ Frida çš„å­˜åœ¨å˜å¾—æ›´åŠ å›°éš¾ã€‚è¿™å¯¹äºåœ¨æŸäº›å¯èƒ½ä¼šä¸»åŠ¨æ£€æµ‹å’Œé˜»æ­¢ Frida çš„åº”ç”¨ä¸­ä½¿ç”¨ Frida éå¸¸æœ‰ç”¨ã€‚

### 6. çµæ´»æ€§

é€šè¿‡å…è®¸ç”¨æˆ·æŒ‡å®š Frida ç‰ˆæœ¬å’Œç«¯å£ï¼Œè¯¥å·¥å…·æä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥é€‚åº”ä¸åŒçš„éœ€æ±‚å’Œç¯å¢ƒã€‚

### 7. äºŒè¿›åˆ¶ä¿®æ”¹æŠ€æœ¯

ä½¿ç”¨ [hexreplace](hexreplace/main.go) æ¥æ‰§è¡ŒäºŒè¿›åˆ¶æ›¿æ¢ï¼Œåœ¨ä¸é‡æ–°ç¼–è¯‘ Frida çš„æƒ…å†µä¸‹ä¿®æ”¹äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™ç§æ–¹æ³•è™½ç„¶æœ‰æ•ˆï¼Œä½†ä¹Ÿæœ‰å±€é™æ€§ï¼Œå› ä¸ºå®ƒåªèƒ½æ›¿æ¢å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚

## æ³¨æ„äº‹é¡¹

- é»˜è®¤çš„ root ç”¨æˆ·å¯†ç ä¸º "alpine"ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¼ºçƒˆå»ºè®®æ›´æ”¹æ­¤å¯†ç ã€‚
- è¯·ç¡®ä¿æ‚¨çš„ iOS è®¾å¤‡å·²è¶Šç‹±å¹¶å®‰è£…äº† OpenSSHã€‚
- æ­¤å·¥å…·ä»…ç”¨äºæ•™è‚²å’Œç ”ç©¶ç›®çš„ã€‚è¯·éµå®ˆæ‰€æœ‰é€‚ç”¨çš„æ³•å¾‹å’Œæ¡æ¬¾ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œæ‹‰å–è¯·æ±‚ã€‚å¯¹äºé‡å¤§æ›´æ”¹ï¼Œè¯·å…ˆå¼€issueè®¨è®ºæ‚¨æƒ³è¦æ›´æ”¹çš„å†…å®¹ã€‚

## è®¸å¯è¯

[MIT LICENSE](LICENSE)

---

# Fridare

Fridare is a modification tool designed for customizing Frida-server, specifically for jailbroken iOS devices. It allows users to change names and ports, enhancing security and flexibility. It eliminates many jailbreak detection scenarios for Frida.

ğŸ‰ **v4.0.0 Major Update**: Brand new cross-platform GUI version based on Fyne framework, providing a modern graphical user interface that makes Frida server modification more intuitive and convenient!

âœ¨ **Dual Mode Support**: Retains the powerful command-line interface while introducing a user-friendly graphical interface to meet different user preferences.

[CHANGELOG](CHANGELOG)

## Features

Here's the English version of the changelog:

## [v3.1.4] - 2024-07-18

### Added
- Introduced new `patch-tools` command for modifying the frida-tools module
- Implemented `render_markdown` function to display simple Markdown formatting in the terminal
- Added `generate_random_name` function to create random Frida modification names
- Created `move_file` function to handle "are identical" errors during file moves

### Improved
- Enhanced `list_frida_versions` function to render Markdown-formatted version descriptions
- Upgraded `build_frida` function to support building from local deb files
- Expanded functionality and error handling in `patch_frida_tools` and `restore_frida_tools` functions
- Optimized `modify_frida_tools` function for more reliable frida-tools modifications
- Enhanced `download_frida_module` function with support for specific OS and architecture

### Fixed
- Resolved issues with incorrect Frida path detection in certain scenarios
- Addressed "are identical" errors that could occur during file moves

### Changed
- Updated `show_main_usage` and other usage instruction functions to reflect new features
- Adjusted `parse_arguments` function to accommodate the new `patch-tools` command
- Modified configuration file handling to include support for `FRIDA_NAME`

### Other
- Improved overall code structure for better readability and maintainability
- Added more detailed log outputs for enhanced execution information
- Updated version number to 3.1.4

### New Features v3.0.0
- Added `fridare.sh` script, integrating all functionalities and providing a more complete command-line interface
- Added `build`, `ls`, `download`, `lm`, `setup`, `config`, and `help` commands
- Added configuration file support for saving and loading user settings
- Added color output to enhance user experience
- Added automatic dependency checking and installation
- Added functionality to download specific Frida modules
- Added listing of available Frida versions and modules

### New Features v2.2.0 (Tested only on macOS arm architecture, other architectures not tested)
- Added frida-tools patch, adapting to `frida:rpc` feature modification
   - Resolves the issue of Android memory scanning for this string
   - Automatically scans the local pip installation location of frida-tools, modifies the `core.py` file, and modifies the `_frida.abi3.so` file
- Added frida-agent.dylib modification, hiding from filename and load location
   - Resolves the issue of unhidden agent loading

### New Features v2.1.1

- Introduced `autoinstall.sh` script for automatic deployment of Frida plugins.
- Introduced `Makefile` to simplify the project build and deployment process.
- Before running, please ensure that the [issh](https://github.com/4ch12dy/issh) command is installed on your machine. And configure password-free SSH login.
   > Configure password-free SSH login for issh
   ```shell
   # Generate keygen, skip if already generated
   ssh-keygen -t rsa -b 4096 -C "<EMAIL>"
   # Configure iPhone IP, can be skipped if using USB connection
   issh ip set <iPhone-IP>     
   # Copy public key to /var/root on the phone, requires root password alpine
   issh scp ~/.ssh/id_rsa.pub  
   # Add public key to authorized_keys file on remote server
   issh run "mkdir -p ~/.ssh && cat /var/root/id_rsa.pub >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys && chmod 700 ~/.ssh"
   ```

## Features

- **ğŸ‰ Brand New GUI Version**: Modern graphical user interface based on Fyne framework
- **ğŸ–¥ï¸ Cross-Platform Support**: Native GUI applications for Windows, macOS, Linux
- **ğŸ“± Intuitive Operation**: Visual Frida server modification and configuration management
- **ğŸ“Š Real-time Feedback**: Graphical log display and progress bar visualization
- **ğŸ”§ Windows deb Package Support**: Native deb package modification and creation on Windows without Linux environment
- Automatically download and modify specified versions of frida-server
- Randomly generate new frida-server names
- Customize frida-server ports
- Support for arm and arm64 architectures
- Binary replacement modification
   - frida-server
   - frida-agent.dylib
   - frida-tools
- Generate modified .deb packages ready for direct installation
- Integrated command-line interface providing multiple functionalities
- Configuration file support for saving user settings
- Automatic dependency checking and installation
- Download specific Frida modules
- List available Frida versions and modules

## Structure and Functionality of the Frida Modification Script
```shell
fridare.sh - Frida Modification Script
â”‚
â”œâ”€â”€ Main Functions
â”‚   â”œâ”€â”€ Build Modified Frida (build)
â”‚   â”‚   â”œâ”€â”€ Support for specified version or latest version
â”‚   â”‚   â”œâ”€â”€ Auto-generate random 5-character name
â”‚   â”‚   â”œâ”€â”€ Custom port setting
â”‚   â”‚   â””â”€â”€ Support for arm and arm64 architectures
â”‚   â”œâ”€â”€ List Available Frida Versions (ls, list)
â”‚   â”‚   â””â”€â”€ Fetch version info from GitHub API
â”‚   â”œâ”€â”€ Download Specific Frida Version (download)
â”‚   â”‚   â”œâ”€â”€ Support for downloading single or all modules
â”‚   â”‚   â””â”€â”€ Optional auto-extraction feature
â”‚   â”œâ”€â”€ List Available Frida Modules (lm, list-modules)
â”‚   â”œâ”€â”€ Check and Install System Dependencies (setup)
â”‚   â”‚   â”œâ”€â”€ Auto-detect missing dependencies
â”‚   â”‚   â””â”€â”€ Install dependencies using package manager
â”‚   â””â”€â”€ Configure Options (config)
â”‚       â”œâ”€â”€ Set HTTP proxy
â”‚       â”œâ”€â”€ Set Frida server port
â”‚       â””â”€â”€ Set Frida modification name
â”‚
â”œâ”€â”€ Script Structure
â”‚   â”œâ”€â”€ Initialize Configuration (initialize_config)
â”‚   â”‚   â””â”€â”€ Read and create configuration file
â”‚   â”œâ”€â”€ Parse Arguments (parse_arguments)
â”‚   â”‚   â””â”€â”€ Support various command-line options
â”‚   â”œâ”€â”€ Command Processing
â”‚   â”‚   â”œâ”€â”€ build: Build modified Frida
â”‚   â”‚   â”œâ”€â”€ setup: Set up environment
â”‚   â”‚   â”œâ”€â”€ config: Manage configuration
â”‚   â”‚   â”œâ”€â”€ list: List versions
â”‚   â”‚   â”œâ”€â”€ download: Download modules
â”‚   â”‚   â””â”€â”€ list-modules: List modules
â”‚   â””â”€â”€ Main Function (main)
â”‚       â””â”€â”€ Entry point integrating all functionalities
â”‚
â”œâ”€â”€ Build Process (build_frida)
â”‚   â”œâ”€â”€ Version Check
â”‚   â”‚   â””â”€â”€ Support for latest version auto-detection
â”‚   â”œâ”€â”€ Environment Preparation
â”‚   â”‚   â”œâ”€â”€ Check Python environment (including Conda)
â”‚   â”‚   â””â”€â”€ Check Golang environment
â”‚   â”œâ”€â”€ Download Frida (download_frida)
â”‚   â”œâ”€â”€ Unpack deb File
â”‚   â”œâ”€â”€ Modify Files
â”‚   â”‚   â”œâ”€â”€ Modify Launch Daemon (modify_launch_daemon)
â”‚   â”‚   â”‚   â””â”€â”€ Update plist file
â”‚   â”‚   â”œâ”€â”€ Modify Debian Files (modify_debian_files)
â”‚   â”‚   â”‚   â”œâ”€â”€ Update control file
â”‚   â”‚   â”‚   â”œâ”€â”€ Update extrainst_ file
â”‚   â”‚   â”‚   â””â”€â”€ Update prerm file
â”‚   â”‚   â””â”€â”€ Modify Binary Files (modify_binary)
â”‚   â”‚       â”œâ”€â”€ Modify frida-server
â”‚   â”‚       â”œâ”€â”€ Modify frida-agent.dylib
â”‚   â”‚       â””â”€â”€ Use hexreplace tool
â”‚   â”œâ”€â”€ Repackage deb File (repackage_deb)
â”‚   â””â”€â”€ Modify frida-tools (modify_frida_tools)
â”‚       â”œâ”€â”€ Modify Python library files
â”‚       â””â”€â”€ Update strings in core.py
â”‚
â”œâ”€â”€ Auxiliary Functions
â”‚   â”œâ”€â”€ Log Output (log_info, log_success, log_warning, log_error)
â”‚   â”‚   â””â”€â”€ Support for colored output
â”‚   â”œâ”€â”€ User Confirmation (confirm_execution)
â”‚   â”‚   â””â”€â”€ Optional auto-confirm mode
â”‚   â”œâ”€â”€ Dependency Check (check_dependencies)
â”‚   â”œâ”€â”€ Dependency Installation (install_dependencies)
â”‚   â”œâ”€â”€ Configuration Management (set_config, unset_config, list_config)
â”‚   â””â”€â”€ Frida Version and Module Lists (list_frida_versions, list_frida_modules)
â”‚
â”œâ”€â”€ Download Functionality (download_frida_module)
â”‚   â”œâ”€â”€ Version Selection (latest or specified version)
â”‚   â”œâ”€â”€ Module Selection (single module or all modules)
â”‚   â”œâ”€â”€ Download Process
â”‚   â”‚   â””â”€â”€ Support for HTTP proxy
â”‚   â””â”€â”€ Extraction Processing
â”‚       â””â”€â”€ Optional auto-extraction feature
â”‚
â””â”€â”€ Security and Permissions
    â”œâ”€â”€ Maintain sudo Privileges (sudo_keep_alive)
    â””â”€â”€ Cleanup Process (cleanup)
```

## Prerequisites

- macOS operating system (for running build scripts)
- Homebrew
- Python 3
- Go (for compiling the hexreplace tool)
- Jailbroken iOS device
- OpenSSH installed on iOS device

## Installation

1. Clone this repository:
```shell
git clone https://github.com/suifei/fridare.git
cd fridare
```

2. Run the setup command:
```shell
./fridare.sh setup
```
This command will check and install the required dependencies.

3. View the help information:
```shell
./fridare.sh help
```

## Usage
Fridare provides multiple commands to meet different needs:

### Command List

1. `build`: Repackage Frida
2. `ls` or `list`: List available Frida versions
3. `download`: Download a specific version of Frida
4. `lm` or `list-modules`: List available Frida modules
5. `setup`: Check and install system dependencies
6. `config`: Set configuration options
7. `help`: Display help information

### Usage Examples

1. Build a modified version of Frida
```shell
./fridare.sh build -v 16.0.19 -p 8899 -y
```
This command will build Frida version 16.0.19, set the port to 8899, and automatically confirm all prompts.

2. List available Frida versions
```shell
./fridare.sh ls
```

3. Download a specific version of Frida
```shell
./fridare.sh download -v 16.0.19 -m frida-server ./output
```
This command will download the frida-server module of version 16.0.19 to the ./output directory.

4. Download all Frida modules of the latest version
```shell
./fridare.sh download -latest -all ./output
```

5. List available Frida modules
```shell
./fridare.sh lm
```

6. Set up the environment
```shell
./fridare.sh setup
```
This command will check and install the required system dependencies.

7. Configure settings
```shell
./fridare.sh config set proxy http://127.0.0.1:7890
./fridare.sh config set port 9999
./fridare.sh config set frida-name abcde
```
These commands set the proxy, port, and Frida modification name respectively.

8. List current configuration
```shell
./fridare.sh config ls
```

9. Get help information for a specific command
```shell
./fridare.sh help build
```
This command will display detailed usage for the build command.

10. Build Frida using the latest version
```shell
./fridare.sh build -latest -p 9999 -y
```
This command will build using the latest version of Frida, set the port to 9999, and automatically confirm all prompts.

11. Download but don't extract Frida module
```shell
./fridare.sh download -latest -m frida-gadget --no-extract ./output
```
This command will download the latest version of the frida-gadget module to the ./output directory but won't automatically extract it.

12. Install frida-tools
```shell
./fridare.sh config frida-tools
```
This command will install or update frida-tools.

13. Transfer the generated .deb package to your iOS device:
```shell
scp ./dist/frida_16.3.3_iphoneos-arm_tcp.deb root@<iPhone-IP>:/var/root/
```

14. SSH into your iOS device and install the modified package:
```shell
ssh root@<iPhone-IP>
dpkg -i /var/root/frida_16.3.3_iphoneos-arm_tcp.deb
```

These examples cover the main functionalities and common usage scenarios of the script. They can help you quickly get started with using it.

## Installing Compatible Frida Tools

To ensure compatibility, please install Frida tools that match the modified server version:
```shell
pip install frida-tools==12.4.3
```
For Node.js users:
```shell
npm install frida@16.3.3
```

## Accessing frida-server
If your device is accessed via USB, you can use the following command to connect to the local frida-server:
```shell
frida -U -f <target-process>
```
## Using Remote frida-server
If not using a USB data cable, you can use the following commands to connect to the remote frida-server:
```shell
frida -H <iPhone-IP>:8899 -U
frida-trace -H <iPhone-IP>:8899 ...
frida-ps -H <iPhone-IP>:8899
frida-inject -H <iPhone-IP>:8899 ...
```

## Principles
Core principles of the Fridare project:

### 1. frida-server Modification Principle

The core idea of Fridare is to modify frida-server to make it harder to detect. This is mainly achieved through the following aspects:

- Renaming the server file:
   Rename `frida-server` to a randomly generated name (e.g., `abcde`), which avoids simple name detection.

- Modifying startup configuration:
   Update the LaunchDaemons plist file to use the new server name and custom port. This changes the way the server starts and the port it listens on.

- Binary file modification:
   Use binary replacement techniques to replace "frida" related strings in the server binary file with custom strings. This can avoid detection of Frida by scanning the binary file.

### 2. deb Package Modification and Repackaging

The project uses the dpkg-deb tool to unpack and repack deb files. This allows us to modify the contents of the package, including:

- Updating the package name in the DEBIAN/control file
- Modifying DEBIAN/extrainst_ and DEBIAN/prerm scripts to use the new server name
- Replacing and renaming the actual server binary file

### 3. Automated Process

The fridare.sh script automates the entire process:

- Downloading the specified version of frida-server
- Generating random names
- Modifying all necessary files
- Repacking the deb file

### 4. Compatibility Considerations

The script handles packages for both arm and arm64 architectures, ensuring compatibility on different iOS devices.

### 5. Enhanced Security

By changing the server name, port, and internal strings, this project makes it more difficult to detect the presence of Frida through conventional methods. This is particularly useful for using Frida in applications that might actively detect and block Frida.

### 6. Flexibility

By allowing users to specify the Frida version and port, the tool provides great flexibility to adapt to different needs and environments.

### 7. Binary Modification Technique

Using [hexreplace](hexreplace/main.go) to perform binary replacements, modifying binary files without recompiling Frida. While effective, this method has limitations as it can only replace fixed-length strings.

## Notes

- The default root user password is "alpine". For security reasons, it is strongly recommended to change this password.
- Please ensure your iOS device is jailbroken and has OpenSSH installed.
- This tool is for educational and research purposes only. Please comply with all applicable laws and terms.

## Contributing

Issues and pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

## License

[MIT LICENSE](LICENSE)
